<?xml version="1.0" encoding="UTF-8"?>
<documents>
    <!--	 configure data sources here 
    <SQLdatasource id="ds1" type="sql">
            <host>jdbc:mysql://localhost:3306/subsolr</host>
            <userid>root</userid>
            <password>admin</password>
            <driver>com.mysql.jdbc.Driver</driver>
    </SQLdatasource>-->
    <DataSource id="ds2" type="file">
        <local_path>f:</local_path>
        <file_name>book.csv</file_name>
    </DataSource>
    <DataSource id="ds1" type="sql">
        <host>jdbc:mysql://localhost:3306/subsolr</host>
        <userid>root</userid>
        <password>admin</password>
        <driver>com.mysql.jdbc.Driver</driver>
    </DataSource>
    
    <Transformer id="default" class="com.subsolr.transformer.impl.DefaultTransformerImpl"/>
    <Transformer id="deDup" class="com.subsolr.transformer.impl.DeDupTransformerImpl"/>
    <Transformer id="conditionalSelect" class="com.subsolr.transformer.impl.ConditionalSelectTransformer"/>
    

    <document name="employeeDoc"  transformer="deDup">
        <fieldset transformer="default" transKeys="TITLE" name="book" sourceId="ds2" DataSource="ds2">
            <field column_name="1" field_map_name="TITLE" />
            <field column_name="2" field_map_name="PAGES" />
            <field column_name="3" field_map_name="PRICE" />
            <field column_name="4" field_map_name="AUTHOR" />
            
			
        </fieldset>
        <fieldset transformer="deDup" transKeys="EMP_NAME" name="employees" sourceId="ds1">
            <field column_name="EMP_ID" field_map_name="EMP_ID" />
            <field column_name="EMP_NAME" field_map_name="EMP_NAME" />
            <field column_name="LNAME" field_map_name="LNAME" />
            <field column_name="EMP_GENDER" field_map_name="EMP_GENDER" />
            <field column_name="EMP_HIRE_DATE" field_map_name="EMP_HIRE_DATE" />
            <field column_name="DEPT_ID" field_map_name="EMP_DEPT" />
            <query>
                <statement>
                    SELECT
                    emp_no as EMP_ID,
                    first_name as EMP_NAME,
                    last_name as LNAME,
                    gender as EMP_GENDER,
                    hire_date as EMP_HIRE_DATE,
                    emp_dept as DEPT_ID
                    FROM
                    employees
                </statement>
                <max_cached_results> 10000 </max_cached_results>
            </query>
        </fieldset>
		
                
        <fieldset transformer="default" transKeys="DEPT_ID" name="depts" sourceId="ds1" >
            <field column_name="DEPT_ID" field_map_name="DEPT_ID" />
            <field column_name="DEPT_NAME" field_map_name="DEPT_NAME" />
            <query>
                <statement>
                    SELECT
                    dept_id as DEPT_ID,
                    dept_name as DEPT_NAME					
                    FROM
                    department
                </statement>
                <max_cached_results> 10000 </max_cached_results>
            </query>
        </fieldset>
        <mappings>
            <mapping name="firstjoin">
                employees#EMP_DEPT=depts#DEPT_ID
            </mapping>
            <mapping name="secondjoin">
                employees#EMP_ID=book#AUTHOR
            </mapping>			

        </mappings>

        
        <join id="join1" leftFieldset="employees" leftKey="EMP_DEPT" rightFieldset="depts" rightKey="DEPT_ID"/>
        <join id="join2" leftFieldset="employees" leftKey="EMP_ID" rightFieldset="book" rightKey="AUTHOR"/>
         
        
        
        
    </document>-->
</documents>